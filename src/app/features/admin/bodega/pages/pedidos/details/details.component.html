<div class="div_container">
  <ui-card [showHeader]="true" class="div_card">

    <!-- CABECERA -->
    <div card-header class="card_header">
      <div class="header_left">
        <ui-text-field
          [label]="'ID Pedido'"
          [value]="idPedido"
          [disabled]="true"
        />
      </div>

      <div class="header_right">
        <ui-button
          [icon]="'refresh'"
          (evntClick)="loadPedido()"
        />
        <ui-button
          [label]="'Volver'"
          [icon]="'arrow_back'"
          (evntClick)="volver()"
        />
      </div>
    </div>

    <!-- INFO PEDIDO -->
    <div class="card_info">

      <div class="info_row">
        <ui-text-field [label]="'Empresa'" [value]="pedido?.nombreEmpr"/>
        <ui-text-field [label]="'Fecha Pedido'" [value]="pedido?.fechaPedi | date:'dd/MM/yyyy'"/>
        <ui-text-field [label]="'Fecha Entrega'" [value]="pedido?.fechaEntrPedi | date:'dd/MM/yyyy'"/>
        <ui-text-field [label]="'Estado'" [value]="pedido?.estadoPedi"/>
      </div>

      <div class="info_row">
        <ui-text-field [label]="'Motivo'" [value]="pedido?.motivoPedi"/>
        <ui-text-field [label]="'Cantidad Total'" [value]="pedido?.cantidadTotalPedi"/>
        <ui-text-field [label]="'Total'" [value]="pedido?.totalPedi | currency:'$'"/>
        <ui-text-field [label]="'ObservaciÃ³n'" [value]="pedido?.observacionPedi"/>
      </div>

    </div>

    <!-- TABLA PRODUCTOS -->
    <div class="card_table">
      <h3 class="table_title">Productos del Pedido</h3>
      <table class="productos_table">
        <thead>
          <tr>
            <th>Producto</th>
            <th>Cantidad</th>
            <th>Precio Unit.</th>
            <th>Subtotal</th>
            <th>IVA</th>
            <th>Dcto. Compra</th>
            <th>Dcto. Caduc.</th>
            <th>Total</th>
          </tr>
        </thead>
        <tbody>
          @if (detalles.length === 0) {
            <tr>
              <td colspan="8" class="empty_row">No hay productos en este pedido</td>
            </tr>
          }
          @for (detalle of detalles; track detalle.ideProd) {
            <tr>
              <td>{{ detalle.nombreProd }}</td>
              <td>{{ detalle.cantidadProd }}</td>
              <td>{{ detalle.precioUnitarioProd | currency:'$' }}</td>
              <td>{{ detalle.subtotalProd | currency:'$' }}</td>
              <td>{{ detalle.ivaProd | currency:'$' }}</td>
              <td>{{ detalle.dctoCompraProd | currency:'$' }}</td>
              <td>{{ detalle.dctoCaducProd | currency:'$' }}</td>
              <td>{{ detalle.totalProd | currency:'$' }}</td>
            </tr>
          }
        </tbody>
      </table>
    </div>

  </ui-card>
</div>
